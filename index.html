<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SGkasir</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <script src="https://kit.fontawesome.com/2d3d2d3d2d.js" crossorigin="anonymous"></script>
  <style>
    body.dark-mode { background:#121212; color:#eee; }
    .bottom-nav {
      position: fixed; bottom: 0; left: 0; right: 0;
      display: flex; justify-content: space-around;
      background: #f8f9fa; border-top: 1px solid #ddd;
    }
    .bottom-nav a {
      flex: 1; text-align: center; padding: 8px 0;
      text-decoration: none; color: #555;
    }
    .page-section { display:none; padding: 15px; margin-bottom:60px; }
    .page-section.active { display:block; }
    .offcanvas { width: 250px; }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar bg-light shadow-sm px-3">
    <button class="btn btn-outline-secondary" data-bs-toggle="offcanvas" data-bs-target="#menuSidebar">
      <i class="fas fa-bars"></i>
    </button>
    <span class="mx-auto fw-bold">SGkasir</span>
    <button class="btn btn-outline-secondary" id="toggleTheme">
      <i class="fas fa-sun"></i>
    </button>
  </nav>

  <!-- Sidebar Burger Menu -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="menuSidebar">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Menu</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
      <a href="#" class="d-block mb-2" onclick="showSection('pemasukan')">Pemasukan</a>
      <a href="#" class="d-block mb-2" onclick="showSection('pengeluaran')">Pengeluaran</a>
      <a href="#" class="d-block mb-2" onclick="showSection('saldo')">Saldo Akun</a>
      <a href="#" class="d-block mb-2" onclick="showSection('stok')">Stok Barang</a>
      <a href="#" class="d-block mb-2" onclick="showSection('hutang')">Hutang / Piutang</a>
      <a href="#" class="d-block mb-2" onclick="showSection('audit')">Audit Stok</a>
      <a href="#" class="d-block mb-2" onclick="showSection('pengaturan')">Pengaturan</a>
    </div>
  </div>

  <!-- Transaksi -->
  <div id="transaksi" class="page-section active">
    <h5><i class="fas fa-cash-register"></i> Transaksi</h5>
    <div class="card p-3">
      <input type="text" class="form-control mb-2" id="namaProduk" placeholder="Contoh: Pulsa Telkomsel 20K">
      <input type="number" class="form-control mb-2" id="hargaProduk" placeholder="Harga (Rp)">
      <select id="akunTransaksi" class="form-select mb-2"></select>
      <button class="btn btn-success w-100 mb-2" onclick="simpanTransaksi()">ðŸ’¾ Simpan Penjualan</button>
      <button class="btn btn-danger w-100" onclick="bersihkanForm()">ðŸ—‘ Bersihkan</button>
    </div>
  </div>

  <!-- History -->
  <div id="history" class="page-section">
    <h5><i class="fas fa-history"></i> History</h5>
    <div class="card p-3">
      <button class="btn btn-outline-primary mb-2" onclick="exportCSV()">ðŸ“‘ Export CSV</button>
      <textarea class="form-control mb-2" id="catatanShare" placeholder="Catatan untuk print/share"></textarea>
      <div class="d-flex gap-2">
        <button class="btn btn-secondary flex-fill" onclick="printData()">ðŸ–¨ Print</button>
        <button class="btn btn-info flex-fill" onclick="shareTXT()">Share TXT</button>
        <button class="btn btn-warning flex-fill" onclick="sharePNG()">Share PNG</button>
      </div>
      <ul class="list-group mt-3" id="historyList"></ul>
    </div>
  </div>

  <!-- Rekap -->
  <div id="rekap" class="page-section">
    <h5><i class="fas fa-chart-line"></i> Rekap</h5>
    <div class="card p-3">
      <p>Omzet: Rp <span id="rekapOmzet">0</span></p>
      <p>Pemasukan: Rp <span id="rekapPemasukan">0</span></p>
      <p>Pengeluaran: Rp <span id="rekapPengeluaran">0</span></p>
      <p>Saldo Akun: Rp <span id="rekapSaldo">0</span></p>
    </div>
  </div>

  <!-- Pemasukan -->
  <div id="pemasukan" class="page-section">
    <h5>Pemasukan</h5>
    <input type="number" id="jumlahPemasukan" class="form-control mb-2" placeholder="Jumlah (Rp)">
    <input type="text" id="ketPemasukan" class="form-control mb-2" placeholder="Keterangan">
    <button class="btn btn-success w-100" onclick="tambahPemasukan(parseInt(document.getElementById('jumlahPemasukan').value)||0, document.getElementById('ketPemasukan').value || 'Pemasukan')">+ Simpan</button>
  </div>

  <!-- Pengeluaran -->
  <div id="pengeluaran" class="page-section">
    <h5>Pengeluaran</h5>
    <input type="number" id="jumlahPengeluaran" class="form-control mb-2" placeholder="Jumlah (Rp)">
    <input type="text" id="ketPengeluaran" class="form-control mb-2" placeholder="Keterangan">
    <button class="btn btn-danger w-100" onclick="tambahPengeluaran(parseInt(document.getElementById('jumlahPengeluaran').value)||0, document.getElementById('ketPengeluaran').value || 'Pengeluaran')">- Simpan</button>
  </div>

  <!-- Saldo Akun -->
  <div id="saldo" class="page-section">
    <h5>Saldo Akun</h5>
    <table class="table table-striped">
      <thead><tr><th>Nama Akun</th><th>Saldo</th></tr></thead>
      <tbody id="akunList"></tbody>
    </table>
    <input type="text" id="namaAkunBaru" class="form-control mb-2" placeholder="Nama Akun">
    <input type="number" id="saldoAwal" class="form-control mb-2" placeholder="Saldo Awal (Rp)">
    <button class="btn btn-primary w-100" onclick="tambahAkun(document.getElementById('namaAkunBaru').value, parseInt(document.getElementById('saldoAwal').value)||0)">+ Tambah Akun</button>
  </div>

  <!-- Stok Barang -->
  <div id="stok" class="page-section">
    <h5>Stok Barang</h5>
    <table class="table table-striped">
      <thead><tr><th>Nama Barang</th><th>Stok</th><th>Harga</th></tr></thead>
      <tbody id="stokList"></tbody>
    </table>
    <input type="text" id="namaBarang" class="form-control mb-2" placeholder="Nama Barang">
    <input type="number" id="stokJumlah" class="form-control mb-2" placeholder="Jumlah">
    <input type="number" id="stokHarga" class="form-control mb-2" placeholder="Harga">
    <button class="btn btn-primary w-100" onclick="tambahStok()">+ Tambah Barang</button>
  </div>

  <!-- Hutang Piutang -->
  <div id="hutang" class="page-section">
    <h5>Hutang / Piutang</h5>
    <table class="table table-striped">
      <thead><tr><th>Nama</th><th>Jumlah</th><th>Tipe</th></tr></thead>
      <tbody id="hutangList"></tbody>
    </table>
    <input type="text" id="namaHutang" class="form-control mb-2" placeholder="Nama">
    <input type="number" id="jumlahHutang" class="form-control mb-2" placeholder="Jumlah">
    <select id="tipeHutang" class="form-select mb-2">
      <option value="Hutang">Hutang</option>
      <option value="Piutang">Piutang</option>
    </select>
    <button class="btn btn-primary w-100" onclick="tambahHutang()">+ Simpan</button>
  </div>

  <!-- Audit Stok -->
  <div id="audit" class="page-section">
    <h5>Audit Stok</h5>
    <div id="auditList"></div>
    <button class="btn btn-warning w-100" onclick="auditStok()">ðŸ”Ž Audit</button>
  </div>

  <!-- Pengaturan -->
  <div id="pengaturan" class="page-section">
    <h5>Pengaturan</h5>
    <button class="btn btn-secondary w-100" onclick="resetData()">Reset Semua Data</button>
  </div>

  <!-- Bottom Nav -->
  <div class="bottom-nav">
    <a href="#" onclick="showSection('transaksi')"><i class="fas fa-cash-register"></i><br>Transaksi</a>
    <a href="#" onclick="showSection('history')"><i class="fas fa-history"></i><br>History</a>
    <a href="#" onclick="showSection('rekap')"><i class="fas fa-chart-line"></i><br>Rekap</a>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>