<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aplikasi Kasir Konter</title>
  <style>
    body {
      margin:0; font-family:sans-serif;
      background:#121212; color:#eee;
    }
    header {
      background:#000; color:orange;
      display:flex; align-items:center; justify-content:space-between;
      padding:10px;
    }
    header img { height:32px; margin-right:8px; }
    header .title { display:flex; align-items:center; }
    nav.bottom {
      position:fixed; bottom:0; left:0; right:0;
      display:flex; justify-content:space-around;
      background:#000; border-top:1px solid #333;
    }
    nav.bottom button {
      flex:1; padding:10px; background:none; border:none; color:#eee;
      font-size:14px;
    }
    nav.bottom button.active { color:orange; font-weight:bold; }
    #burgerMenu {
      position:fixed; top:0; left:-250px; width:250px; height:100%;
      background:#222; padding:20px; transition:0.3s;
    }
    #burgerMenu.active { left:0; }
    #burgerMenu a { display:block; padding:10px; color:#eee; text-decoration:none; border-bottom:1px solid #333; }
    main { padding:15px; margin-bottom:70px; }

    /* Form Styling */
    .form-box {
      background:#1e1e1e;
      padding:15px;
      border-radius:8px;
      box-shadow:0 2px 5px rgba(0,0,0,0.6);
      margin-bottom:15px;
      position:relative;
    }
    .form-control {
      width:100%;
      padding:12px;
      margin-bottom:12px;
      border:1px solid #333;
      border-radius:6px;
      background:#111;
      color:#fff;
      font-size:15px;
    }
    .form-control:focus {
      border-color:orange;
      outline:none;
    }

    /* Fullscreen mode */
    .fullscreen {
      position:fixed;
      top:0; left:0; right:0; bottom:0;
      background:#1e1e1e;
      margin:0;
      border-radius:0;
      z-index:9999;
      overflow-y:auto;
    }
    .fullscreen h2 { margin-top:50px; }

    /* Fullscreen button */
    .fullscreen-btn {
      position:absolute;
      top:10px; right:10px;
      background:none;
      border:none;
      color:#eee;
      font-size:18px;
      cursor:pointer;
    }

    /* Button styling */
    .btn-container {
      display:flex;
      justify-content:space-between;
      gap:4%;
    }
    .btn {
      padding:12px 16px;
      border-radius:6px;
      font-size:15px;
      cursor:pointer;
      flex:1;
      border:none;
    }
    .btn-primary {
      background:orange;
      color:#000;
      font-weight:bold;
    }
    .btn-secondary {
      background:#333;
      color:#fff;
    }

    ul { list-style:none; padding:0; }
    li { padding:8px; border-bottom:1px solid #444; font-size:14px; }
    .dark { background:#121212; color:#eee; }
    .light { background:#fff; color:#000; }
  </style>
</head>
<body class="dark">
  <header>
    <div class="title">
      <img src="logo.png" alt="Logo">
      <div>
        <div>Nama Konter</div>
        <small>Status: Offline</small>
      </div>
    </div>
    <div>
      <button onclick="toggleMenu()">‚ò∞</button>
      <button onclick="toggleTheme()">üåô</button>
    </div>
  </header>

  <div id="burgerMenu">
    <a href="#" onclick="showPage('pemasukan')">Pemasukan</a>
    <a href="#" onclick="showPage('pengeluaran')">Pengeluaran</a>
    <a href="#" onclick="showPage('saldo')">Saldo Bank</a>
    <a href="#" onclick="showPage('stok')">Stok Barang</a>
    <a href="#" onclick="showPage('hutang')">Hutang Piutang</a>
    <a href="#" onclick="showPage('audit')">Audit Stok</a>
    <a href="#" onclick="showPage('pengaturan')">Pengaturan</a>
  </div>

  <main>
    <!-- Transaksi -->
    <section id="transaksi" class="form-box">
      <button class="fullscreen-btn" onclick="toggleFullscreen(this)">üî≤</button>
      <h2>Transaksi</h2>
      <input id="nama" class="form-control" placeholder="Nama Produk">
      <input id="hargaBeli" type="number" class="form-control" placeholder="Harga Beli (Rp)">
      <input id="hargaJual" type="number" class="form-control" placeholder="Harga Jual (Rp)">
      <input id="laba" type="number" class="form-control" placeholder="Laba (otomatis)" readonly>
      <select id="akun" class="form-control"></select>
      <div class="btn-container">
        <button class="btn btn-primary" onclick="simpanTransaksi()">üíæ Simpan</button>
        <button class="btn btn-secondary" onclick="resetForm()">üßπ Bersihkan</button>
      </div>
    </section>

    <!-- History -->
    <section id="history" style="display:none" class="form-box">
      <h2>History</h2>
      <ul id="historyList"></ul>
    </section>

    <!-- Rekap -->
    <section id="rekap" style="display:none" class="form-box">
      <h2>Rekap</h2>
      <p>Omzet: Rp <span id="rekapOmzet">0</span></p>
      <p>Total Laba: Rp <span id="rekapLaba">0</span></p>
      <ul id="akunList"></ul>
    </section>
  </main>

  <nav class="bottom">
    <button onclick="showPage('transaksi')" class="active">Transaksi</button>
    <button onclick="showPage('history')">History</button>
    <button onclick="showPage('rekap')">Rekap</button>
  </nav>

  <script>
    let data = JSON.parse(localStorage.getItem("kasirData")) || {
      transaksi: [],
      akun: [{ nama:"Cash", saldo:0 }],
      omzet:0,
      labaTotal:0,
      stok:[], hutang:[]
    };

    function save(){ localStorage.setItem("kasirData", JSON.stringify(data)); }
    function toggleMenu(){ document.getElementById("burgerMenu").classList.toggle("active"); }
    function toggleTheme(){
      document.body.classList.toggle("light");
      document.body.classList.toggle("dark");
    }
    function showPage(page){
      document.querySelectorAll("main section").forEach(s=>s.style.display="none");
      let el=document.getElementById(page); if(el) el.style.display="block";
      document.querySelectorAll("nav.bottom button").forEach(b=>b.classList.remove("active"));
      document.querySelector(`nav.bottom button[onclick="showPage('${page}')"]`)?.classList.add("active");
      if(page==="history") renderHistory();
      if(page==="rekap") renderRekap();
    }
    function resetForm(){
      document.getElementById("nama").value="";
      document.getElementById("hargaBeli").value=0;
      document.getElementById("hargaJual").value=0;
      document.getElementById("laba").value=0;
    }
    function hitungLabaInput(){
      let beli=parseInt(document.getElementById("hargaBeli").value)||0;
      let jual=parseInt(document.getElementById("hargaJual").value)||0;
      document.getElementById("laba").value=jual-beli;
    }
    document.getElementById("hargaBeli").addEventListener("input",hitungLabaInput);
    document.getElementById("hargaJual").addEventListener("input",hitungLabaInput);

    function simpanTransaksi(){
      let nama=document.getElementById("nama").value;
      let beli=parseInt(document.getElementById("hargaBeli").value)||0;
      let jual=parseInt(document.getElementById("hargaJual").value)||0;
      let laba=jual-beli;
      let akunIdx=document.getElementById("akun").selectedIndex;
      let akun=data.akun[akunIdx].nama;
      let t={ nama,hargaBeli:beli,hargaJual:jual,laba,akun,tanggal:new Date().toLocaleString() };
      data.transaksi.push(t);
      data.omzet+=jual;
      data.labaTotal+=laba;
      data.akun[akunIdx].saldo+=jual-beli;
      save(); resetForm();
      alert("Transaksi tersimpan");
    }

    function renderHistory(){
      let ul=document.getElementById("historyList"); ul.innerHTML="";
      data.transaksi.slice().reverse().forEach(t=>{
        let li=document.createElement("li");
        li.textContent=`${t.tanggal} | ${t.nama} | Jual Rp${t.hargaJual} | Beli Rp${t.hargaBeli} | Laba Rp${t.laba} (${t.akun})`;
        ul.appendChild(li);
      });
    }

    function renderRekap(){
      document.getElementById("rekapOmzet").textContent=data.omzet;
      document.getElementById("rekapLaba").textContent=data.labaTotal;
      let ul=document.getElementById("akunList"); ul.innerHTML="";
      data.akun.forEach(a=>{
        let li=document.createElement("li");
        li.textContent=`${a.nama}: Rp${a.saldo}`;
        ul.appendChild(li);
      });
    }

    function renderAkun(){
      let sel=document.getElementById("akun"); sel.innerHTML="";
      data.akun.forEach(a=>{
        let opt=document.createElement("option");
        opt.textContent=a.nama; sel.appendChild(opt);
      });
    }

    function toggleFullscreen(btn){
      const box = btn.parentElement;
      box.classList.toggle("fullscreen");
      btn.textContent = box.classList.contains("fullscreen") ? "‚ùå" : "üî≤";
    }

    renderAkun();
  </script>
</body>
</html>
