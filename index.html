<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aplikasi Kasir Konter</title>
  <style>
    body {
      margin:0; font-family:sans-serif;
      background:#121212; color:#eee;
    }
    header {
      background:#000; color:orange;
      display:flex; align-items:center; justify-content:space-between;
      padding:10px;
    }
    header img { height:32px; margin-right:8px; }
    header .title { display:flex; align-items:center; }
    nav.bottom {
      position:fixed; bottom:0; left:0; right:0;
      display:flex; justify-content:space-around;
      background:#000; border-top:1px solid #333;
    }
    nav.bottom button {
      flex:1; padding:10px; background:none; border:none; color:#eee;
    }
    nav.bottom button.active { color:orange; font-weight:bold; }
    #burgerMenu {
      position:fixed; top:0; left:-250px; width:250px; height:100%;
      background:#222; padding:20px; transition:0.3s; z-index:1000;
    }
    #burgerMenu.active { left:0; }
    #burgerMenu a { display:block; padding:8px; color:#eee; text-decoration:none; }
    main { padding:15px; margin-bottom:60px; }
    .form-control { width:100%; padding:8px; margin-bottom:10px; }
    .btn { padding:10px; border:none; cursor:pointer; }
    .btn-primary { background:orange; color:#000; }
    .btn-secondary { background:#555; color:#fff; }
    ul { list-style:none; padding:0; }
    li { padding:8px; border-bottom:1px solid #444; }
    .dark { background:#121212; color:#eee; }
    .light { background:#fff; color:#000; }
  </style>
</head>
<body class="dark">
  <header>
    <div class="title">
      <img src="logo.png" alt="Logo">
      <div>
        <div>Nama Konter</div>
        <small>Status: Offline</small>
      </div>
    </div>
    <div>
      <button onclick="toggleMenu()">â˜°</button>
      <button onclick="toggleTheme()">ðŸŒ™</button>
    </div>
  </header>

  <div id="burgerMenu">
    <a href="#" onclick="showPage('pemasukan')">Pemasukan</a>
    <a href="#" onclick="showPage('pengeluaran')">Pengeluaran</a>
    <a href="#" onclick="showPage('saldo')">Saldo Bank</a>
    <a href="#" onclick="showPage('stok')">Stok Barang</a>
    <a href="#" onclick="showPage('hutang')">Hutang Piutang</a>
    <a href="#" onclick="showPage('audit')">Audit Stok</a>
    <a href="#" onclick="showPage('pengaturan')">Pengaturan</a>
  </div>

  <main>
    <!-- Transaksi -->
    <section id="transaksi">
      <h2>Transaksi</h2>
      <input id="nama" class="form-control" placeholder="Nama Produk">
      <input id="hargaBeli" type="number" class="form-control" placeholder="Harga Beli (Rp)">
      <input id="hargaJual" type="number" class="form-control" placeholder="Harga Jual (Rp)">
      <input id="laba" type="number" class="form-control" placeholder="Laba" readonly>
      <select id="akun" class="form-control"></select>
      <button class="btn btn-primary" onclick="simpanTransaksi()">Simpan</button>
      <button class="btn btn-secondary" onclick="resetForm()">Bersihkan</button>
    </section>

    <!-- History -->
    <section id="history" style="display:none">
      <h2>History</h2>
      <ul id="historyList"></ul>
    </section>

    <!-- Rekap -->
    <section id="rekap" style="display:none">
      <h2>Rekap</h2>
      <p>Omzet: Rp <span id="rekapOmzet">0</span></p>
      <p>Total Laba: Rp <span id="rekapLaba">0</span></p>
      <ul id="akunList"></ul>
    </section>

    <!-- Pemasukan -->
    <section id="pemasukan" style="display:none">
      <h2>Pemasukan</h2>
      <input id="namaPemasukan" class="form-control" placeholder="Nama Pemasukan">
      <input id="jumlahPemasukan" type="number" class="form-control" placeholder="Jumlah (Rp)">
      <select id="akunPemasukan" class="form-control"></select>
      <button class="btn btn-primary" onclick="tambahPemasukan()">Simpan</button>
    </section>

    <!-- Pengeluaran -->
    <section id="pengeluaran" style="display:none">
      <h2>Pengeluaran</h2>
      <input id="namaPengeluaran" class="form-control" placeholder="Nama Pengeluaran">
      <input id="jumlahPengeluaran" type="number" class="form-control" placeholder="Jumlah (Rp)">
      <select id="akunPengeluaran" class="form-control"></select>
      <button class="btn btn-primary" onclick="tambahPengeluaran()">Simpan</button>
    </section>
  </main>

  <nav class="bottom">
    <button onclick="showPage('transaksi')" class="active">Transaksi</button>
    <button onclick="showPage('history')">History</button>
    <button onclick="showPage('rekap')">Rekap</button>
  </nav>

  <script>
    let data = JSON.parse(localStorage.getItem("kasirData")) || {
      transaksi: [],
      akun: [{ nama:"Cash", saldo:0 }],
      omzet:0,
      labaTotal:0,
      stok:[], hutang:[]
    };

    function save(){ localStorage.setItem("kasirData", JSON.stringify(data)); }
    function toggleMenu(){ document.getElementById("burgerMenu").classList.toggle("active"); }
    function toggleTheme(){
      document.body.classList.toggle("light");
      document.body.classList.toggle("dark");
    }
    function showPage(page){
      document.querySelectorAll("main section").forEach(s=>s.style.display="none");
      document.getElementById(page).style.display="block";
      document.querySelectorAll("nav.bottom button").forEach(b=>b.classList.remove("active"));
      document.querySelector(`nav.bottom button[onclick="showPage('${page}')"]`)?.classList.add("active");
      if(page==="history") renderHistory();
      if(page==="rekap") renderRekap();
    }
    function resetForm(){
      document.getElementById("nama").value="";
      document.getElementById("hargaBeli").value=0;
      document.getElementById("hargaJual").value=0;
      document.getElementById("laba").value=0;
    }
    function hitungLabaInput(){
      let beli=parseInt(document.getElementById("hargaBeli").value)||0;
      let jual=parseInt(document.getElementById("hargaJual").value)||0;
      document.getElementById("laba").value=jual-beli;
    }
    document.getElementById("hargaBeli").addEventListener("input",hitungLabaInput);
    document.getElementById("hargaJual").addEventListener("input",hitungLabaInput);

    function simpanTransaksi(){
      let nama=document.getElementById("nama").value;
      let beli=parseInt(document.getElementById("hargaBeli").value)||0;
      let jual=parseInt(document.getElementById("hargaJual").value)||0;
      let laba=jual-beli;
      let akunIdx=document.getElementById("akun").selectedIndex;
      let akun=data.akun[akunIdx].nama;
      let t={ nama,hargaBeli:beli,hargaJual:jual,laba,akun,tanggal:new Date().toLocaleString() };
      data.transaksi.push(t);
      data.omzet+=jual;
      data.labaTotal+=laba;
      data.akun[akunIdx].saldo+=jual-beli;
      save(); resetForm();
      alert("Transaksi tersimpan");
    }

    function tambahPemasukan(){
      let nama=document.getElementById("namaPemasukan").value;
      let jumlah=parseInt(document.getElementById("jumlahPemasukan").value)||0;
      let akunIdx=document.getElementById("akunPemasukan").selectedIndex;
      let akun=data.akun[akunIdx].nama;
      let t={ nama,hargaBeli:0,hargaJual:jumlah,laba:jumlah,akun,tanggal:new Date().toLocaleString() };
      data.transaksi.push(t);
      data.omzet+=jumlah;
      data.labaTotal+=jumlah;
      data.akun[akunIdx].saldo+=jumlah;
      save();
      alert("Pemasukan tersimpan");
    }

    function tambahPengeluaran(){
      let nama=document.getElementById("namaPengeluaran").value;
      let jumlah=parseInt(document.getElementById("jumlahPengeluaran").value)||0;
      let akunIdx=document.getElementById("akunPengeluaran").selectedIndex;
      let akun=data.akun[akunIdx].nama;
      let t={ nama,hargaBeli:jumlah,hargaJual:0,laba:-jumlah,akun,tanggal:new Date().toLocaleString() };
      data.transaksi.push(t);
      data.labaTotal-=jumlah;
      data.akun[akunIdx].saldo-=jumlah;
      save();
      alert("Pengeluaran tersimpan");
    }

    function renderHistory(){
      let ul=document.getElementById("historyList"); ul.innerHTML="";
      data.transaksi.slice().reverse().forEach(t=>{
        let li=document.createElement("li");
        li.textContent=`${t.tanggal} | ${t.nama} | Jual Rp${t.hargaJual} | Beli Rp${t.hargaBeli} | Laba Rp${t.laba} (${t.akun})`;
        ul.appendChild(li);
      });
    }

    function renderRekap(){
      document.getElementById("rekapOmzet").textContent=data.omzet;
      document.getElementById("rekapLaba").textContent=data.labaTotal;
      let ul=document.getElementById("akunList"); ul.innerHTML="";
      data.akun.forEach(a=>{
        let li=document.createElement("li");
        li.textContent=`${a.nama}: Rp${a.saldo}`;
        ul.appendChild(li);
      });
    }

    function renderAkun(){
      let sel=document.getElementById("akun"); sel.innerHTML="";
      let sel2=document.getElementById("akunPemasukan"); sel2.innerHTML="";
      let sel3=document.getElementById("akunPengeluaran"); sel3.innerHTML="";
      data.akun.forEach(a=>{
        let opt=document.createElement("option"); opt.textContent=a.nama;
        let opt2=opt.cloneNode(true);
        let opt3=opt.cloneNode(true);
        sel.appendChild(opt); sel2.appendChild(opt2); sel3.appendChild(opt3);
      });
    }

    renderAkun();
  </script>
</body>
</html>
